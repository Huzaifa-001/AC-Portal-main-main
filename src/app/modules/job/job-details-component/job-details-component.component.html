<section class="section-padding">
  <div class="container">
    <div class="component-header">
      <p class="title lg text-white">Job</p>
      <i class="material-symbols-outlined text-white">work</i>
      <span class="title lg text-white">&nbsp;{{ job?.name }}</span>
      <!-- <ol class="breadcrumb px-2">
              <li class="breadcrumb-item"><a class="text-light" href="index.html">Contacts</a></li>
              <li class="breadcrumb-item"><a class="text-light" href="#">Dashboard</a></li>
          </ol> -->
    </div>

    <div class="card">
      <div class="card-body">
        <div class="row match-height">
          <div class="col-col-12">
            <div class="card position-relative">
              <div class="card-header p-0 flex-column">
                <div class="col-12 d-flex align-items-center justify-content-end">
                  <mat-menu #menuJob="matMenu" class="dropdown">
                    <button mat-menu-item (click)="openAddJobsModal(job)">
                      <mat-icon class="material-symbols-outlined">border_color</mat-icon>
                      <span>Edit</span>
                    </button>
                  </mat-menu>
                  <button mat-icon-button [matMenuTriggerFor]="menuJob" class="btn btn-sm hide-arrow">
                    <mat-icon class="material-symbols-outlined">more_vert</mat-icon>
                  </button>
                </div>
                <div class="col-12">
                  <table class="table mt-1">
                    <tbody>
                      <tr>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            address
                          </h6>
                          <small>{{job?.address1 + " " + job?.address2}}</small>

                        </td>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            start date
                          </h6>
                          <small>{{job?.startDate | date : "dd/MM/yyyy h:mm a"}}</small>

                        </td>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Mobile Number
                          </h6>
                          <small>{{ job?.mobileNo }}</small>

                        </td>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Home Number
                          </h6>
                          <small>{{ job?.homeNo }}</small>

                        </td>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Zip
                          </h6>
                          <small>{{ job?.zip }}</small>

                        </td>
                      </tr>

                      <tr>
                        <td class="text-capitalize py-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            City
                          </h6>
                          <small class="text-capitalize">{{ job?.city }}</small>
                        </td>
                        <td class="text-capitalize py-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            end date
                          </h6>
                          <small class="text-capitalize">{{
                            job?.endDate | date : "dd/MM/yyyy h:mm a"
                            }}</small>
                        </td>
                        <td class="text-capitalize py-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Office Number
                          </h6>
                          <small class="text-capitalize">{{
                            job?.officeNo
                            }}</small>
                        </td>
                        <td class="text-capitalize py-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Fax Number
                          </h6>
                          <small class="text-capitalize">{{
                            job?.faxNo
                            }}</small>
                        </td>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Primary Contact
                          </h6>

                          <a type="button" [routerLink]="'/contact/'+JobData?.PrimaryContact?.id">{{
                            JobData?.PrimaryContact?.name }}</a>
                        </td>
                      </tr>

                      <tr>
                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Assigned Team Members
                          </h6>
                          <small>
                            <span *ngFor="let teamMember of JobData?.TeamMembers; let last = last">
                              {{ teamMember.name }}{{ !last ? ', ' : '' }}
                            </span>
                          </small>
                          <!-- <ng-container *ngFor="let teamMember of JobData?.TeamMembers; let last = last">
                            <a style="margin-right: 2px;" type="button" [routerLink]="'/contact/'+teamMember.id">
                              {{ teamMember.name }}{{ !last ? ', ' : '' }}
                            </a>
                          </ng-container> -->
                        </td>

                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Related Contacts
                          </h6>
                          <small>
                            <ng-container *ngFor="let relatedContact of JobData?.RelatedContacts; let last = last">
                              <a *ngIf="relatedContact.name && relatedContact.id"
                                style="margin-right: 2px; cursor: pointer;" type="button"
                                [routerLink]="'/contact/'+relatedContact.id">
                                {{ relatedContact.name }}{{ !last ? ', ' : '' }}
                              </a>
                            </ng-container>
                          </small>
                        </td>

                        <td class="py-0 border-0">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            Sales Representative
                          </h6>
                          <small>{{ JobData?.SalesRep?.name }}</small>

                          <!-- <a type="button" [routerLink]="'/contact/'+JobData?.SalesRep?.id" >{{ JobData?.SalesRep?.name }}</a> -->

                        </td>
                      </tr>

                      <tr>
                        <td class="py-0 border-0" *ngFor="let item of job?.customFieldValues">
                          <h6 class="d-flex text-primary text-uppercase mt-1">
                            {{ item.fieldName }}
                          </h6>
                          <small>
                            {{ item.fieldActualValue }}
                          </small>
                        </td>
                      </tr>

                    </tbody>
                  </table>

                  <div class="card-title mt-3">
                    <div class="text-white">spacing</div>
                  </div>

                  <div class="actions d-flex justify-content-end">
                    <button class="btn btn-primary btn-sm" (click)="openWorkOrderModal(null)">
                      <div class="d-flex align-items-center">
                        <i class="material-symbols-outlined">add</i>
                        <span>Add Work Order</span>
                      </div>
                    </button>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <button class="btn btn-primary btn-sm" (click)="openEventModal(null)">
                      <div class="d-flex align-items-center">
                        <i class="material-symbols-outlined">add</i>
                        <span>Add Event</span>
                      </div>
                    </button>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <!-- <button class="btn btn-primary btn-sm" (click)="openWorkflowModal(null)">
                      <div class="d-flex align-items-center">
                        <i class="material-symbols-outlined ">add</i>
                        <span>Add Workflow</span>
                      </div>
                    </button>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> -->
                  </div>
                </div>
                <hr />

                <div class="col-12 my-3">
                  <div class="card flex justify-content-center">
                    <p-panel header="WorkOrder Timeline" [toggleable]="true">
                      <div class="row py-2 my-2 no-gutter">
                        <div #timeline></div>
                      </div>
                    </p-panel>
                  </div>
                </div>

                <div class="col-12">
                  <nav class="navbar navbar-expand-lg navbar-light" style="background: #f1f3f9">
                    <div class="container-fluid d-block">
                      <ul class="nav d-flex justify-content-around">
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLink="/jobs/{{ job?.id }}/logbook"
                            routerLinkActive="active">
                            Logbook
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/tasks">
                            Tasks
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/events">
                            Events
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/financials">
                            Financials
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/attachments">
                            Attachments
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/photos">
                            Photos
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/workorder">
                            Work Orders
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link btn btn-link text-capitalize" routerLinkActive="active"
                            routerLink="/jobs/{{ job?.id }}/workflows">
                            Work Flows
                          </a>
                        </li>
                      </ul>
                    </div>
                  </nav>

                  <!-- <div class="card-title my-2">
                  <div class="text-white">spacing</div>
                </div> -->
                  <!-- <div class="actions d-flex justify-content-end my-2">
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <button
                      class="btn btn-outline-primary text-primary btn-sm d-flex align-items-center"
                      type="button"
                      data-bs-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="true"
                    >
                      <i class="material-symbols-outlined">unfold_more</i>
                      <span>Sorted By</span>
                    </button>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  </div> -->
                </div>
              </div>

              <router-outlet></router-outlet>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="sidenav-overlay"></div>

<!-- / Content -->